#include <fstream>
#include <string>
#include <filesystem>
#include <windows.h>
#include <iostream>
#include <algorithm>

int main() {
    wchar_t path[MAX_PATH];
    GetModuleFileNameW(NULL, path, MAX_PATH);
    std::filesystem::path exePath(path);
    std::filesystem::path logFilePath = exePath.parent_path() / "logfile.txt";

    std::ifstream logFile(logFilePath);
    if (!logFile) {
        std::cerr << "Failed to open " << logFilePath << '\n';
        return 1;
    }

    std::string filePath;
    while (std::getline(logFile, filePath)) {
        filePath.erase(remove(filePath.begin(), filePath.end(), '\"'), filePath.end());
        std::filesystem::path fileToDelete(filePath);
        if (!std::filesystem::remove(fileToDelete)) {
            std::cerr << "Failed to delete " << fileToDelete << '\n';
            
        }
    }

    return 0;
}